{"ast":null,"code":"var _jsxFileName = \"/home/guilherme/Trybe/Projetos-trybe/sd-07-project-recipes-app/src/components/Category.js\";\nimport React, { useContext, useEffect, useState } from 'react';\nimport { useHistory } from 'react-router';\nimport { getCategoryDrinks, getRecipesDrinksByCategory } from '../services/drinkAPI';\nimport { getCategoryFoods, getRecipesFoodsByCategory } from '../services/foodAPI';\nimport RecipesContext from '../context/RecipesContext';\n\nfunction Category() {\n  const {\n    setRecipesFilters,\n    btnFilter,\n    setBtnFilter,\n    initialRecipes,\n    showButton\n  } = useContext(RecipesContext);\n  const [categorys, setCategorys] = useState([]);\n  const [filterSelected, setFilterSelected] = useState('');\n  const history = useHistory();\n  const checkLocation = history.location.pathname;\n  useEffect(() => {\n    const firstRecipe = 0;\n    const lastRecipe = 5;\n\n    if (checkLocation === '/bebidas') {\n      getCategoryDrinks().then(response => setCategorys(response.drinks.slice(firstRecipe, lastRecipe)));\n    }\n\n    if (checkLocation === '/comidas') {\n      getCategoryFoods().then(response => setCategorys(response.meals.slice(firstRecipe, lastRecipe)));\n    }\n  }, []);\n\n  const handleFilter = filter => {\n    if (filter === 'Goat') {\n      setBtnFilter(!btnFilter);\n    }\n\n    if (filterSelected === filter) {\n      setRecipesFilters(initialRecipes);\n      setFilterSelected('');\n    }\n\n    if (filterSelected === '' || filterSelected !== filter) {\n      const firstRecipe = 0;\n      const lastRecipe = 12;\n      setFilterSelected(filter);\n\n      if (checkLocation === '/bebidas') {\n        getRecipesDrinksByCategory(filter).then(response => setRecipesFilters(response.drinks.slice(firstRecipe, lastRecipe)));\n      }\n\n      if (checkLocation === '/comidas') {\n        getRecipesFoodsByCategory(filter).then(response => setRecipesFilters(response.meals.slice(firstRecipe, lastRecipe)));\n      }\n    }\n  };\n\n  const handleAll = () => {\n    setRecipesFilters(initialRecipes);\n    setFilterSelected('');\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 5\n    }\n  }, categorys.map(category => {\n    const name = category.strCategory;\n    const dataTestId = `${name}-category-filter`;\n    return /*#__PURE__*/React.createElement(\"button\", {\n      \"data-testid\": dataTestId,\n      type: \"button\",\n      onClick: () => handleFilter(name),\n      key: name,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 11\n      }\n    }, name);\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    \"data-testid\": \"All-category-filter\",\n    type: \"button\",\n    onClick: () => handleAll(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }\n  }, \"All\"));\n}\n\nexport default Category;","map":{"version":3,"sources":["/home/guilherme/Trybe/Projetos-trybe/sd-07-project-recipes-app/src/components/Category.js"],"names":["React","useContext","useEffect","useState","useHistory","getCategoryDrinks","getRecipesDrinksByCategory","getCategoryFoods","getRecipesFoodsByCategory","RecipesContext","Category","setRecipesFilters","btnFilter","setBtnFilter","initialRecipes","showButton","categorys","setCategorys","filterSelected","setFilterSelected","history","checkLocation","location","pathname","firstRecipe","lastRecipe","then","response","drinks","slice","meals","handleFilter","filter","handleAll","map","category","name","strCategory","dataTestId"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useState } from 'react';\nimport { useHistory } from 'react-router';\nimport {\n  getCategoryDrinks,\n  getRecipesDrinksByCategory,\n} from '../services/drinkAPI';\nimport {\n  getCategoryFoods,\n  getRecipesFoodsByCategory,\n} from '../services/foodAPI';\nimport RecipesContext from '../context/RecipesContext';\n\nfunction Category() {\n  const {\n    setRecipesFilters,\n    btnFilter,\n    setBtnFilter,\n    initialRecipes,\n    showButton,\n  } = useContext(RecipesContext);\n\n  const [categorys, setCategorys] = useState([]);\n  const [filterSelected, setFilterSelected] = useState('');\n\n  const history = useHistory();\n  const checkLocation = history.location.pathname;\n\n  useEffect(() => {\n    const firstRecipe = 0;\n    const lastRecipe = 5;\n    if (checkLocation === '/bebidas') {\n      getCategoryDrinks().then((response) => setCategorys(response.drinks\n        .slice(firstRecipe, lastRecipe)));\n    }\n    if (checkLocation === '/comidas') {\n      getCategoryFoods().then((response) => setCategorys(response.meals\n        .slice(firstRecipe, lastRecipe)));\n    }\n  }, []);\n\n  const handleFilter = (filter) => {\n    if (filter === 'Goat') {\n      setBtnFilter(!btnFilter);\n    }\n\n    if (filterSelected === filter) {\n      setRecipesFilters(initialRecipes);\n      setFilterSelected('');\n    }\n\n    if (filterSelected === '' || filterSelected !== filter) {\n      const firstRecipe = 0;\n      const lastRecipe = 12;\n      setFilterSelected(filter);\n\n      if (checkLocation === '/bebidas') {\n        getRecipesDrinksByCategory(filter)\n          .then((response) => setRecipesFilters(response.drinks\n            .slice(firstRecipe, lastRecipe)));\n      }\n      if (checkLocation === '/comidas') {\n        getRecipesFoodsByCategory(filter)\n          .then((response) => setRecipesFilters(response.meals\n            .slice(firstRecipe, lastRecipe)));\n      }\n    }\n  };\n\n  const handleAll = () => {\n    setRecipesFilters(initialRecipes);\n    setFilterSelected('');\n  };\n\n  return (\n    <div>\n      {categorys.map((category) => {\n        const name = category.strCategory;\n        const dataTestId = `${name}-category-filter`;\n        return (\n          <button\n            data-testid={ dataTestId }\n            type=\"button\"\n            onClick={ () => handleFilter(name) }\n            key={ name }\n          >\n            {name}\n          </button>\n        );\n      })}\n      <button\n        data-testid=\"All-category-filter\"\n        type=\"button\"\n        onClick={ () => handleAll() }\n      >\n        All\n      </button>\n    </div>\n  );\n}\n\nexport default Category;\n"]},"metadata":{},"sourceType":"module"}